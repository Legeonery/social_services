import{d as j,r as y,f as z,c as u,o as c,g as A,b as e,h as g,v as w,i as I,t as f,j as S,k as K,e as M,a as $,u as G,m as H,w as U,n as x,F as V,l as L}from"./app-DXa2VlGV.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-dj-OOfQw.js";import"./index-DKKzq88K.js";import"./useForwardExpose-BWdJdQw-.js";import"./RovingFocusGroup-KvIestG1.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BPblcbSB.js";const O=["disabled"],Q=["disabled"],R={class:"flex justify-end gap-2 pt-4"},W={type:"submit",class:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700"},X=j({__name:"AddServiceForm",props:{initial:{},isEdit:{type:Boolean}},emits:["submit","cancel"],setup(C,{emit:d}){const m=d,p=C,n=y({name:"",code:"",description:"",price:0,type:"main"});z(()=>p.initial,o=>{o?n.value={...o}:n.value={name:"",code:"",description:"",price:0,type:"main"}},{immediate:!0});function r(){m("submit",{...n.value})}return(o,a)=>(c(),u("form",{onSubmit:A(r,["prevent"]),class:"space-y-4"},[e("div",null,[a[6]||(a[6]=e("label",{class:"block text-sm font-medium dark:text-white"},"Наименование *",-1)),g(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>n.value.name=s),required:"",class:"w-full rounded border p-2 dark:bg-gray-700 dark:text-white"},null,512),[[w,n.value.name]])]),e("div",null,[a[7]||(a[7]=e("label",{class:"block text-sm font-medium dark:text-white"},"Шифр *",-1)),g(e("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>n.value.code=s),disabled:o.isEdit,required:"",class:"w-full rounded border p-2 dark:bg-gray-700 dark:text-white"},null,8,O),[[w,n.value.code]])]),e("div",null,[a[8]||(a[8]=e("label",{class:"block text-sm font-medium dark:text-white"},"Описание",-1)),g(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=s=>n.value.description=s),class:"w-full rounded border p-2 dark:bg-gray-700 dark:text-white"},null,512),[[w,n.value.description]])]),e("div",null,[a[9]||(a[9]=e("label",{class:"block text-sm font-medium dark:text-white"},"Цена (₽)",-1)),g(e("input",{"onUpdate:modelValue":a[3]||(a[3]=s=>n.value.price=s),type:"number",min:"0",class:"w-full rounded border p-2 dark:bg-gray-700 dark:text-white"},null,512),[[w,n.value.price,void 0,{number:!0}]])]),e("div",null,[a[11]||(a[11]=e("label",{class:"block text-sm font-medium dark:text-white"},"Тип услуги",-1)),g(e("select",{"onUpdate:modelValue":a[4]||(a[4]=s=>n.value.type=s),disabled:o.isEdit,class:"w-full rounded border p-2 dark:bg-gray-700 dark:text-white"},a[10]||(a[10]=[e("option",{value:"main"},"Основная",-1),e("option",{value:"additional"},"Дополнительная",-1)]),8,Q),[[I,n.value.type]])]),e("div",R,[e("button",{type:"button",onClick:a[5]||(a[5]=s=>o.$emit("cancel")),class:"rounded bg-gray-200 px-4 py-2 dark:bg-gray-600 dark:text-white"},"Отмена"),e("button",W,f(o.isEdit?"Сохранить":"Добавить"),1)])],32))}}),Y={class:"w-full max-w-lg rounded-xl bg-white p-6 shadow-xl dark:bg-gray-800"},Z={class:"mb-4 flex items-center justify-between"},ee={class:"text-xl font-semibold text-gray-900 dark:text-white"},te=j({__name:"BaseModal",props:{show:{type:Boolean},title:{}},emits:["close"],setup(C,{emit:d}){const m=d;return(p,n)=>p.show?(c(),u("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:n[1]||(n[1]=A(r=>m("close"),["self"]))},[e("div",Y,[e("div",Z,[e("h2",ee,f(p.title),1),e("button",{onClick:n[0]||(n[0]=r=>m("close")),class:"text-gray-500 hover:text-red-500"},"✖")]),K(p.$slots,"default")])])):S("",!0)}}),ie={class:"flex flex-col gap-4 p-4"},ae={class:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between"},ne={class:"flex gap-2"},le={class:"overflow-auto rounded-lg border dark:border-gray-700"},oe={class:"min-w-full table-auto text-sm"},se={class:"bg-gray-100 dark:bg-gray-800 dark:text-gray-200"},de={class:"p-2"},re={class:"p-2"},ue={class:"p-2"},ce={class:"p-2"},pe={class:"p-2"},ve={class:"p-2"},me={class:"flex items-center justify-center gap-3"},be=["onClick"],ye=["onClick"],fe={key:0},xe={class:"flex justify-start pt-4"},ge={class:"inline-flex items-center gap-1"},ke=["disabled"],we={key:0},Se=["onClick"],he={key:1},$e=["disabled"],B=14,Ee=j({__name:"Services",setup(C){const d=y([{id:1,name:"Консультация",code:"S001",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:2,name:"Консультация",code:"S002",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:3,name:"Консультация",code:"S003",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:4,name:"Консультация",code:"S004",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:5,name:"Консультация",code:"S005",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:6,name:"Консультация",code:"S006",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:7,name:"Консультация",code:"S007",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:8,name:"Консультация",code:"S008",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:9,name:"Консультация",code:"S009",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:10,name:"Диагностика",code:"S0010",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:11,name:"Диагностика",code:"S0011",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:12,name:"Диагностика",code:"S0012",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:13,name:"Диагностика",code:"S0013",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:14,name:"Диагностика",code:"S0014",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:15,name:"Диагностика",code:"S0015",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:16,name:"Консультация",code:"S0016",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:17,name:"Консультация",code:"S0017",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:18,name:"Консультация",code:"S0018",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:19,name:"Консультация",code:"S0019",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:20,name:"Консультация",code:"S0020",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:21,name:"Консультация",code:"S0021",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:22,name:"Консультация",code:"S0022",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:23,name:"Консультация",code:"S0023",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:24,name:"Консультация",code:"S0024",description:"Краткое описание",price:1e3,active:!0,type:"main"},{id:25,name:"Диагностика",code:"S0025",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:26,name:"Диагностика",code:"S0026",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:27,name:"Диагностика",code:"S0027",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:28,name:"Диагностика",code:"S0028",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:29,name:"Диагностика",code:"S0029",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:30,name:"Диагностика",code:"S0030",description:"Краткое описание",price:1500,active:!1,type:"main"},{id:1,name:"Доп. анализ",code:"S003",description:"Краткое описание",price:500,active:!0,type:"additional"},{id:2,name:"Доп. анализ",code:"S003",description:"Краткое описание",price:500,active:!0,type:"additional"},{id:3,name:"Доп. анализ",code:"S003",description:"Краткое описание",price:500,active:!0,type:"additional"}]),m=y(""),p=y("name"),n=y(!0),r=y(!1),o=y(1),a=y("main"),s=y(null),E=M(()=>d.value.filter(i=>i.type===a.value).filter(i=>i.name.toLowerCase().includes(m.value.toLowerCase())||i.code.toLowerCase().includes(m.value.toLowerCase())).sort((i,b)=>{const h=i[p.value],P=b[p.value];return n.value?h.localeCompare(P):P.localeCompare(h)})),F=M(()=>{const l=(o.value-1)*B;return E.value.slice(l,l+B)}),v=M(()=>Math.ceil(E.value.length/B));function k(l){l>=1&&l<=v.value&&(o.value=l)}function _(){if(v.value<=5)return Array.from({length:v.value-2},(b,h)=>h+2);let l=Math.max(2,o.value-1),t=Math.min(v.value-1,l+2);t-l<2&&(l=Math.max(2,t-2));const i=[];for(let b=l;b<=t;b++)i.push(b);return i}function D(l){const t=d.value.find(i=>i.id===l);window.confirm(`Вы уверены, что хотите удалить услугу "${t==null?void 0:t.name}"?`)&&(d.value=d.value.filter(i=>i.id!==l))}function N(l){d.value.push({...l,id:Date.now(),active:!0}),r.value=!1}function T(l){s.value={...l},r.value=!0}function q(l){const t=d.value.findIndex(i=>i.id===l.id);t!==-1&&(d.value[t]={...d.value[t],...l}),r.value=!1,s.value=null}return(l,t)=>(c(),u(V,null,[$(G(H),{title:"Услуги"}),$(J,{breadcrumbs:[{title:"Услуги",href:"/services"}]},{default:U(()=>[e("div",ie,[e("div",ae,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>m.value=i),type:"text",placeholder:"Поиск...",class:"w-full rounded border p-2 md:w-1/2 dark:bg-gray-800 dark:text-white"},null,512),[[w,m.value]]),e("button",{onClick:t[1]||(t[1]=i=>r.value=!0),class:"self-end rounded bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-700"}," + Добавить услугу ")]),e("div",ne,[e("button",{class:x(["rounded px-4 py-1",a.value==="main"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-white"]),onClick:t[2]||(t[2]=i=>{a.value="main",o.value=1})}," Основные ",2),e("button",{class:x(["rounded px-4 py-1",a.value==="additional"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-white"]),onClick:t[3]||(t[3]=i=>{a.value="additional",o.value=1})}," Дополнительные ",2)]),e("div",le,[e("table",oe,[e("thead",se,[e("tr",null,[e("th",{onClick:t[4]||(t[4]=i=>{p.value="name",n.value=!n.value}),class:"cursor-pointer p-2 text-left"}," Наименование "),e("th",{onClick:t[5]||(t[5]=i=>{p.value="code",n.value=!n.value}),class:"cursor-pointer p-2 text-left"}," Шифр "),t[13]||(t[13]=e("th",{class:"p-2 text-left"},"Описание",-1)),t[14]||(t[14]=e("th",{class:"p-2 text-left"},"Цена",-1)),t[15]||(t[15]=e("th",{class:"p-2 text-left"},"Статус",-1)),t[16]||(t[16]=e("th",{class:"p-2 text-center"},"Действия",-1))])]),e("tbody",null,[(c(!0),u(V,null,L(F.value,i=>(c(),u("tr",{key:i.id,class:"border-t hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700"},[e("td",de,f(i.name),1),e("td",re,f(i.code),1),e("td",ue,f(i.description),1),e("td",ce,f(i.price)+" ₽",1),e("td",pe,[e("span",{class:x(i.active?"text-green-600":"text-gray-400")},f(i.active?"Активна":"Неактивна"),3)]),e("td",ve,[e("div",me,[e("button",{onClick:b=>T(i),class:"text-blue-500 transition hover:scale-110 hover:text-blue-700",title:"Редактировать"}," ✏️ ",8,be),e("button",{onClick:b=>D(i.id),class:"text-red-500 transition hover:scale-110 hover:text-red-700",title:"Удалить"}," 🗑️ ",8,ye)])])]))),128)),F.value.length===0?(c(),u("tr",fe,t[17]||(t[17]=[e("td",{colspan:"6",class:"p-4 text-center text-gray-400"},"Нет услуг для отображения",-1)]))):S("",!0)])])]),e("div",xe,[e("div",ge,[e("button",{onClick:t[6]||(t[6]=i=>k(o.value-1)),disabled:o.value===1,class:"rounded border px-3 py-1 disabled:opacity-50 dark:border-gray-600"}," ‹ ",8,ke),e("button",{onClick:t[7]||(t[7]=i=>k(1)),class:x(["rounded border px-3 py-1 dark:border-gray-600",o.value===1?"bg-blue-600 text-white":""])}," 1 ",2),_()[0]>2?(c(),u("span",we,"...")):S("",!0),(c(!0),u(V,null,L(_(),i=>(c(),u("button",{key:i,onClick:b=>k(i),class:x(["rounded border px-3 py-1 dark:border-gray-600",o.value===i?"bg-blue-600 text-white":""])},f(i),11,Se))),128)),_().slice(-1)[0]<v.value-1?(c(),u("span",he,"...")):S("",!0),v.value>1?(c(),u("button",{key:2,onClick:t[8]||(t[8]=i=>k(v.value)),class:x(["rounded border px-3 py-1 dark:border-gray-600",o.value===v.value?"bg-blue-600 text-white":""])},f(v.value),3)):S("",!0),e("button",{onClick:t[9]||(t[9]=i=>k(o.value+1)),disabled:o.value===v.value,class:"rounded border px-3 py-1 disabled:opacity-50 dark:border-gray-600"}," › ",8,$e)])]),$(te,{show:r.value,title:s.value?"Редактирование услуги":"Добавление услуги",onClose:t[12]||(t[12]=i=>{r.value=!1,s.value=null})},{default:U(()=>[$(X,{initial:s.value,isEdit:!!s.value,onSubmit:t[10]||(t[10]=i=>s.value?q:N),onCancel:t[11]||(t[11]=i=>{r.value=!1,s.value=null})},null,8,["initial","isEdit"])]),_:1},8,["show","title"])])]),_:1})],64))}});export{Ee as default};
